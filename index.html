<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –ü–∏—Ç–∞–Ω–∏—è</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        header {
            text-align: center;
            padding: 40px 20px;
            position: relative;
        }

        h1 {
            font-size: 3.5em;
            color: white;
            text-shadow: 0 10px 30px rgba(0,0,0,0.3);
            margin-bottom: 10px;
            animation: fadeInDown 1s ease;
        }

        .subtitle {
            color: rgba(255,255,255,0.9);
            font-size: 1.3em;
            animation: fadeInUp 1s ease;
        }

        /* Navigation */
        .nav-tabs {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .tab-btn {
            padding: 15px 35px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            border: none;
            border-radius: 50px;
            color: white;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            transform: translateY(0);
        }

        .tab-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.3);
        }

        .tab-btn.active {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            transform: scale(1.1);
        }

        /* Cards */
        .card {
            background: white;
            border-radius: 25px;
            padding: 40px;
            margin: 20px 0;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            animation: fadeIn 0.5s ease;
            position: relative;
            overflow: hidden;
        }

        .card::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
            transform: rotate(45deg);
            transition: 0.5s;
        }

        .card:hover::before {
            animation: shine 1.5s ease;
        }

        @keyframes shine {
            0% { transform: translateX(-100%) rotate(45deg); }
            100% { transform: translateX(100%) rotate(45deg); }
        }

        .card h2 {
            color: #667eea;
            margin-bottom: 25px;
            font-size: 2em;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .card h3 {
            color: #764ba2;
            margin: 25px 0 15px;
            font-size: 1.5em;
        }

        /* Form Elements */
        .form-group {
            margin: 20px 0;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 600;
            font-size: 1.05em;
        }

        input[type="number"],
        input[type="text"],
        select {
            width: 100%;
            padding: 15px;
            border: 3px solid #e0e0e0;
            border-radius: 15px;
            font-size: 1em;
            transition: all 0.3s ease;
            background: #f9f9f9;
        }

        input:focus,
        select:focus {
            outline: none;
            border-color: #667eea;
            background: white;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.2);
        }

        .radio-group,
        .checkbox-group {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            margin: 15px 0;
        }

        .radio-label,
        .checkbox-label {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 20px;
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            user-select: none;
            position: relative;
        }

        .radio-label:hover,
        .checkbox-label:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        /* –°–∫—Ä—ã–≤–∞–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –Ω–æ –æ—Å—Ç–∞–≤–ª—è–µ–º –∏—Ö —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º–∏ */
        .radio-label input[type="radio"],
        .checkbox-label input[type="checkbox"] {
            position: absolute;
            opacity: 0;
            cursor: pointer;
            width: 100%;
            height: 100%;
            left: 0;
            top: 0;
            margin: 0;
            z-index: 1;
        }

        /* –ö–∞—Å—Ç–æ–º–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä */
        .radio-label::before,
        .checkbox-label::before {
            content: '';
            width: 20px;
            height: 20px;
            border: 3px solid #667eea;
            background: white;
            flex-shrink: 0;
            transition: all 0.3s ease;
            position: relative;
            z-index: 0;
        }

        .radio-label::before {
            border-radius: 50%;
        }

        .checkbox-label::before {
            border-radius: 5px;
        }

        /* –¢–µ–∫—Å—Ç –≤–Ω—É—Ç—Ä–∏ label */
        .radio-label span,
        .checkbox-label span {
            position: relative;
            z-index: 0;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è radio */
        .radio-label input[type="radio"]:checked ~ span {
            color: #333;
        }

        .radio-label:has(input[type="radio"]:checked)::before {
            background: #667eea;
            box-shadow: inset 0 0 0 3px white;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è checkbox */
        .checkbox-label input[type="checkbox"]:checked ~ span {
            color: #333;
        }

        .checkbox-label:has(input[type="checkbox"]:checked)::before {
            background: #667eea;
            border-color: #667eea;
        }

        .checkbox-label:has(input[type="checkbox"]:checked)::after {
            content: '‚úì';
            position: absolute;
            left: 24px;
            top: 50%;
            transform: translateY(-50%);
            color: white;
            font-size: 16px;
            font-weight: bold;
            z-index: 0;
        }

        /* Buttons */
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 18px 45px;
            border: none;
            border-radius: 50px;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
            margin: 20px 10px;
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.6);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 25px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(245, 87, 108, 0.3);
        }

        .btn-secondary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(245, 87, 108, 0.5);
        }

        /* Results */
        .results {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .result-card {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            padding: 25px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .result-card::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.3) 0%, transparent 70%);
            animation: pulse 3s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(0.8); opacity: 0.5; }
            50% { transform: scale(1.2); opacity: 0.8; }
        }

        .result-card:hover {
            transform: translateY(-5px) scale(1.05);
        }

        .result-value {
            font-size: 2.5em;
            font-weight: bold;
            color: #764ba2;
            margin: 10px 0;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .result-label {
            font-size: 1.1em;
            color: #555;
            font-weight: 600;
        }

        /* Menu Display */
        .menu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin: 30px 0;
        }

        .day-card {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
            transform-style: preserve-3d;
        }

        .day-card:hover {
            transform: rotateY(5deg) translateY(-10px);
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
        }

        .day-title {
            font-size: 1.5em;
            color: #764ba2;
            margin-bottom: 20px;
            font-weight: bold;
            text-align: center;
        }

        .meal-item {
            background: white;
            padding: 15px;
            margin: 10px 0;
            border-radius: 15px;
            border-left: 5px solid #667eea;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        .meal-item:hover {
            transform: translateX(10px);
            border-left-color: #f5576c;
        }

        .meal-name {
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }

        .meal-calories {
            color: #667eea;
            font-size: 0.9em;
        }

        .meal-actions {
            margin-top: 10px;
            display: flex;
            gap: 10px;
        }

        /* Hidden sections */
        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes fadeInDown {
            from { opacity: 0; transform: translateY(-50px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(50px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* 3D Elements */
        .icon-3d {
            display: inline-block;
            font-size: 1.5em;
        }

        /* Product Cards */
        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .product-card {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .product-card:hover {
            transform: scale(1.05) rotateZ(2deg);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .product-name {
            font-weight: bold;
            color: #333;
            margin: 10px 0;
        }

        .product-calories {
            color: #667eea;
            font-size: 0.9em;
        }

        /* Filter Section */
        .filter-section {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            padding: 25px;
            border-radius: 20px;
            margin: 20px 0;
        }

        /* Responsive */
        @media (max-width: 768px) {
            h1 { font-size: 2.5em; }
            .subtitle { font-size: 1em; }
            .card { padding: 25px; }
            .menu-grid { grid-template-columns: 1fr; }
            .results { grid-template-columns: 1fr; }
        }

        /* Loading animation */
        .loading {
            text-align: center;
            padding: 40px;
            color: #667eea;
            font-size: 1.2em;
        }

        .spinner {
            border: 4px solid rgba(102, 126, 234, 0.1);
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><span class="icon-3d">üçé</span> –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –ü–∏—Ç–∞–Ω–∏—è <span class="icon-3d">ü•ó</span></h1>
            <p class="subtitle">–°–æ–∑–¥–∞–π –∏–¥–µ–∞–ª—å–Ω–æ–µ –º–µ–Ω—é –¥–ª—è –∑–¥–æ—Ä–æ–≤–æ–≥–æ –æ–±—Ä–∞–∑–∞ –∂–∏–∑–Ω–∏</p>
        </header>

        <nav class="nav-tabs">
            <button class="tab-btn active" onclick="showTab('calculator')">üìä –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</button>
            <button class="tab-btn" onclick="showTab('products')">ü•ò –ü—Ä–æ–¥—É–∫—Ç—ã</button>
            <button class="tab-btn" onclick="showTab('menu')">üìÖ –ú–æ—ë –º–µ–Ω—é</button>
        </nav>

        <!-- Calculator Tab -->
        <div id="calculator" class="tab-content active">
            <div class="card">
                <h2><span class="icon-3d">üë§</span> –õ–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</h2>
                
                <div class="form-group">
                    <label>–í–æ–∑—Ä–∞—Å—Ç</label>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="age" value="0-12">
                            <span>0-12 –ª–µ—Ç</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="age" value="12-18">
                            <span>12-18 –ª–µ—Ç</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="age" value="18-30" checked>
                            <span>18-30 –ª–µ—Ç</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="age" value="30-60">
                            <span>30-60 –ª–µ—Ç</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="age" value="60+">
                            <span>60+ –ª–µ—Ç</span>
                        </label>
                    </div>
                </div>

                <div class="form-group">
                    <label>–ü–æ–ª</label>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="gender" value="male" checked>
                            <span>üë® –ú—É–∂—Å–∫–æ–π</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="gender" value="female">
                            <span>üë© –ñ–µ–Ω—Å–∫–∏–π</span>
                        </label>
                    </div>
                </div>

                <div class="form-group">
                    <label>–í–µ—Å (–∫–≥)</label>
                    <input type="number" id="weight" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–µ—Å" value="70">
                </div>

                <div class="form-group">
                    <label>–†–æ—Å—Ç (—Å–º)</label>
                    <input type="number" id="height" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ä–æ—Å—Ç" value="170">
                </div>

                <div class="form-group">
                    <label>–¢–æ—á–Ω—ã–π –≤–æ–∑—Ä–∞—Å—Ç (–ª–µ—Ç)</label>
                    <input type="number" id="exact-age" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–æ–∑—Ä–∞—Å—Ç" value="25">
                </div>

                <div class="form-group">
                    <label>–£—Ä–æ–≤–µ–Ω—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</label>
                    <select id="activity">
                        <option value="1.2">–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è (—Å–∏–¥—è—á–∏–π –æ–±—Ä–∞–∑ –∂–∏–∑–Ω–∏)</option>
                        <option value="1.375">–ù–∏–∑–∫–∞—è (–ª—ë–≥–∫–∏–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è 1-3 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é)</option>
                        <option value="1.55" selected>–°—Ä–µ–¥–Ω—è—è (—É–º–µ—Ä–µ–Ω–Ω—ã–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è 3-5 —Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é)</option>
                        <option value="1.725">–í—ã—Å–æ–∫–∞—è (–∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ã–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è 6-7 —Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é)</option>
                        <option value="1.9">–û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è (–ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å–ø–æ—Ä—Ç)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>–¶–µ–ª—å</label>
                    <select id="goal">
                        <option value="loss">–ü–æ—Ö—É–¥–µ–Ω–∏–µ (-20% –∫–∞–ª–æ—Ä–∏–π)</option>
                        <option value="maintain" selected>–ü–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ —Ñ–æ—Ä–º—ã</option>
                        <option value="gain">–ù–∞–±–æ—Ä –º–∞—Å—Å—ã (+15% –∫–∞–ª–æ—Ä–∏–π)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>–ê–ª–ª–µ—Ä–≥–∏–∏ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è</label>
                    <div class="checkbox-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="allergy-gluten">
                            <span>üåæ –ì–ª—é—Ç–µ–Ω</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" id="allergy-lactose">
                            <span>ü•õ –õ–∞–∫—Ç–æ–∑–∞</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" id="allergy-nuts">
                            <span>ü•ú –û—Ä–µ—Ö–∏</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" id="allergy-fish">
                            <span>üêü –†—ã–±–∞</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" id="allergy-eggs">
                            <span>ü•ö –Ø–π—Ü–∞</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" id="allergy-soy">
                            <span>ü´ò –°–æ—è</span>
                        </label>
                    </div>
                </div>

                <div class="form-group">
                    <label>–ë—é–¥–∂–µ—Ç</label>
                    <select id="budget">
                        <option value="low">–≠–∫–æ–Ω–æ–º (–¥–æ 300‚ÇΩ/–¥–µ–Ω—å)</option>
                        <option value="medium" selected>–°—Ä–µ–¥–Ω–∏–π (300-600‚ÇΩ/–¥–µ–Ω—å)</option>
                        <option value="high">–ü—Ä–µ–º–∏—É–º (600‚ÇΩ+/–¥–µ–Ω—å)</option>
                    </select>
                </div>

                <button class="btn-primary" onclick="calculateCalories()">üî• –†–∞—Å—Å—á–∏—Ç–∞—Ç—å –∫–∞–ª–æ—Ä–∏–π–Ω–æ—Å—Ç—å</button>

                <div id="results-section" style="display: none;">
                    <h3>–í–∞—à–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</h3>
                    <div class="results">
                        <div class="result-card">
                            <div class="result-label">–ë–∞–∑–æ–≤—ã–π –º–µ—Ç–∞–±–æ–ª–∏–∑–º</div>
                            <div class="result-value" id="bmr">0</div>
                            <div class="result-label">–∫–∫–∞–ª/–¥–µ–Ω—å</div>
                        </div>
                        <div class="result-card">
                            <div class="result-label">–° —É—á—ë—Ç–æ–º –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</div>
                            <div class="result-value" id="tdee">0</div>
                            <div class="result-label">–∫–∫–∞–ª/–¥–µ–Ω—å</div>
                        </div>
                        <div class="result-card">
                            <div class="result-label">–í–∞—à–∞ –Ω–æ—Ä–º–∞</div>
                            <div class="result-value" id="target-calories">0</div>
                            <div class="result-label">–∫–∫–∞–ª/–¥–µ–Ω—å</div>
                        </div>
                    </div>

                    <h3>–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ë–ñ–£</h3>
                    <div class="results">
                        <div class="result-card">
                            <div class="result-label">–ë–µ–ª–∫–∏</div>
                            <div class="result-value" id="protein">0</div>
                            <div class="result-label">–≥—Ä–∞–º–º/–¥–µ–Ω—å</div>
                        </div>
                        <div class="result-card">
                            <div class="result-label">–ñ–∏—Ä—ã</div>
                            <div class="result-value" id="fats">0</div>
                            <div class="result-label">–≥—Ä–∞–º–º/–¥–µ–Ω—å</div>
                        </div>
                        <div class="result-card">
                            <div class="result-label">–£–≥–ª–µ–≤–æ–¥—ã</div>
                            <div class="result-value" id="carbs">0</div>
                            <div class="result-label">–≥—Ä–∞–º–º/–¥–µ–Ω—å</div>
                        </div>
                    </div>

                    <button class="btn-primary" onclick="generateMenu()">üìÖ –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –º–µ–Ω—é –Ω–∞ –Ω–µ–¥–µ–ª—é</button>
                </div>
            </div>
        </div>

        <!-- Products Tab -->
        <div id="products" class="tab-content">
            <div class="card">
                <h2><span class="icon-3d">ü•ò</span> –ë–∞–∑–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –∏ —Ä–µ—Ü–µ–ø—Ç–æ–≤</h2>
                
                <div class="filter-section">
                    <h3>–§–∏–ª—å—Ç—Ä—ã</h3>
                    <div class="form-group">
                        <label>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
                        <select id="category-filter" onchange="filterProducts()">
                            <option value="all">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>
                            <option value="vegetables">–û–≤–æ—â–∏</option>
                            <option value="fruits">–§—Ä—É–∫—Ç—ã</option>
                            <option value="grains">–ó–ª–∞–∫–∏ –∏ –∫—Ä—É–ø—ã</option>
                            <option value="protein">–ë–µ–ª–∫–æ–≤—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã</option>
                            <option value="dairy">–ú–æ–ª–æ—á–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã</option>
                            <option value="recipes">–ì–æ—Ç–æ–≤—ã–µ —Ä–µ—Ü–µ–ø—Ç—ã</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>–ü–æ–∏—Å–∫</label>
                        <input type="text" id="search-products" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞..." oninput="filterProducts()">
                    </div>
                </div>

                <div id="products-grid" class="product-grid">
                    <!-- Products will be loaded here -->
                </div>
            </div>
        </div>

        <!-- Menu Tab -->
        <div id="menu" class="tab-content">
            <div class="card">
                <h2><span class="icon-3d">üìÖ</span> –í–∞—à–µ –Ω–µ–¥–µ–ª—å–Ω–æ–µ –º–µ–Ω—é</h2>
                <div id="menu-display">
                    <p style="text-align: center; color: #999; font-size: 1.2em; padding: 40px;">
                        –°–Ω–∞—á–∞–ª–∞ —Ä–∞—Å—Å—á–∏—Ç–∞–π—Ç–µ –∫–∞–ª–æ—Ä–∏–π–Ω–æ—Å—Ç—å –∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –º–µ–Ω—é –Ω–∞ –≤–∫–ª–∞–¥–∫–µ "–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä"
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Database of products and recipes (100 items)
        const productsDatabase = [
            // Vegetables (15 items)
            {id: 1, name: "–ë—Ä–æ–∫–∫–æ–ª–∏", category: "vegetables", calories: 34, protein: 2.8, fats: 0.4, carbs: 7, price: "medium", allergens: []},
            {id: 2, name: "–ú–æ—Ä–∫–æ–≤—å", category: "vegetables", calories: 41, protein: 0.9, fats: 0.2, carbs: 10, price: "low", allergens: []},
            {id: 3, name: "–ü–æ–º–∏–¥–æ—Ä—ã", category: "vegetables", calories: 18, protein: 0.9, fats: 0.2, carbs: 3.9, price: "medium", allergens: []},
            {id: 4, name: "–û–≥—É—Ä—Ü—ã", category: "vegetables", calories: 15, protein: 0.6, fats: 0.1, carbs: 3.6, price: "low", allergens: []},
            {id: 5, name: "–ë–æ–ª–≥–∞—Ä—Å–∫–∏–π –ø–µ—Ä–µ—Ü", category: "vegetables", calories: 27, protein: 1, fats: 0.3, carbs: 6, price: "medium", allergens: []},
            {id: 6, name: "–®–ø–∏–Ω–∞—Ç", category: "vegetables", calories: 23, protein: 2.9, fats: 0.4, carbs: 3.6, price: "medium", allergens: []},
            {id: 7, name: "–ö–∞–ø—É—Å—Ç–∞ –±–µ–ª–æ–∫–æ—á–∞–Ω–Ω–∞—è", category: "vegetables", calories: 25, protein: 1.3, fats: 0.1, carbs: 5.8, price: "low", allergens: []},
            {id: 8, name: "–¶–≤–µ—Ç–Ω–∞—è –∫–∞–ø—É—Å—Ç–∞", category: "vegetables", calories: 25, protein: 1.9, fats: 0.3, carbs: 5, price: "medium", allergens: []},
            {id: 9, name: "–ö–∞–±–∞—á–æ–∫", category: "vegetables", calories: 17, protein: 1.2, fats: 0.3, carbs: 3, price: "low", allergens: []},
            {id: 10, name: "–ë–∞–∫–ª–∞–∂–∞–Ω", category: "vegetables", calories: 25, protein: 1.2, fats: 0.1, carbs: 5.9, price: "medium", allergens: []},
            {id: 11, name: "–°–≤—ë–∫–ª–∞", category: "vegetables", calories: 43, protein: 1.6, fats: 0.2, carbs: 9.6, price: "low", allergens: []},
            {id: 12, name: "–¢—ã–∫–≤–∞", category: "vegetables", calories: 26, protein: 1, fats: 0.1, carbs: 6.5, price: "low", allergens: []},
            {id: 13, name: "–õ—É–∫ —Ä–µ–ø—á–∞—Ç—ã–π", category: "vegetables", calories: 40, protein: 1.1, fats: 0.1, carbs: 9.3, price: "low", allergens: []},
            {id: 14, name: "–ß–µ—Å–Ω–æ–∫", category: "vegetables", calories: 149, protein: 6.5, fats: 0.5, carbs: 33, price: "low", allergens: []},
            {id: 15, name: "–°–∞–ª–∞—Ç –ª–∏—Å—Ç–æ–≤–æ–π", category: "vegetables", calories: 15, protein: 1.4, fats: 0.2, carbs: 2.9, price: "medium", allergens: []},

            // Fruits (15 items)
            {id: 16, name: "–Ø–±–ª–æ–∫–æ", category: "fruits", calories: 52, protein: 0.3, fats: 0.2, carbs: 14, price: "low", allergens: []},
            {id: 17, name: "–ë–∞–Ω–∞–Ω", category: "fruits", calories: 89, protein: 1.1, fats: 0.3, carbs: 23, price: "low", allergens: []},
            {id: 18, name: "–ê–ø–µ–ª—å—Å–∏–Ω", category: "fruits", calories: 47, protein: 0.9, fats: 0.1, carbs: 12, price: "medium", allergens: []},
            {id: 19, name: "–ì—Ä—É—à–∞", category: "fruits", calories: 57, protein: 0.4, fats: 0.1, carbs: 15, price: "medium", allergens: []},
            {id: 20, name: "–ö–∏–≤–∏", category: "fruits", calories: 61, protein: 1.1, fats: 0.5, carbs: 15, price: "high", allergens: []},
            {id: 21, name: "–í–∏–Ω–æ–≥—Ä–∞–¥", category: "fruits", calories: 69, protein: 0.7, fats: 0.2, carbs: 18, price: "high", allergens: []},
            {id: 22, name: "–ö–ª—É–±–Ω–∏–∫–∞", category: "fruits", calories: 32, protein: 0.7, fats: 0.3, carbs: 7.7, price: "high", allergens: []},
            {id: 23, name: "–ß–µ—Ä–Ω–∏–∫–∞", category: "fruits", calories: 57, protein: 0.7, fats: 0.3, carbs: 14, price: "high", allergens: []},
            {id: 24, name: "–ú–∞–ª–∏–Ω–∞", category: "fruits", calories: 52, protein: 1.2, fats: 0.7, carbs: 12, price: "high", allergens: []},
            {id: 25, name: "–ú–∞–Ω–≥–æ", category: "fruits", calories: 60, protein: 0.8, fats: 0.4, carbs: 15, price: "high", allergens: []},
            {id: 26, name: "–ê–Ω–∞–Ω–∞—Å", category: "fruits", calories: 50, protein: 0.5, fats: 0.1, carbs: 13, price: "high", allergens: []},
            {id: 27, name: "–ì—Ä–µ–π–ø—Ñ—Ä—É—Ç", category: "fruits", calories: 42, protein: 0.8, fats: 0.1, carbs: 11, price: "medium", allergens: []},
            {id: 28, name: "–ü–µ—Ä—Å–∏–∫", category: "fruits", calories: 39, protein: 0.9, fats: 0.3, carbs: 9.5, price: "medium", allergens: []},
            {id: 29, name: "–ê–±—Ä–∏–∫–æ—Å", category: "fruits", calories: 48, protein: 1.4, fats: 0.4, carbs: 11, price: "medium", allergens: []},
            {id: 30, name: "–ê–≤–æ–∫–∞–¥–æ", category: "fruits", calories: 160, protein: 2, fats: 15, carbs: 9, price: "high", allergens: []},

            // Grains (15 items)
            {id: 31, name: "–ì—Ä–µ—á–∫–∞", category: "grains", calories: 343, protein: 13, fats: 3.4, carbs: 72, price: "low", allergens: []},
            {id: 32, name: "–†–∏—Å –±–µ–ª—ã–π", category: "grains", calories: 365, protein: 6.7, fats: 0.7, carbs: 79, price: "low", allergens: []},
            {id: 33, name: "–†–∏—Å –±—É—Ä—ã–π", category: "grains", calories: 362, protein: 7.9, fats: 2.9, carbs: 77, price: "medium", allergens: []},
            {id: 34, name: "–û–≤—Å—è–Ω–∫–∞", category: "grains", calories: 389, protein: 17, fats: 6.9, carbs: 66, price: "low", allergens: ["gluten"]},
            {id: 35, name: "–ö–∏–Ω–æ–∞", category: "grains", calories: 368, protein: 14, fats: 6, carbs: 64, price: "high", allergens: []},
            {id: 36, name: "–ë—É–ª–≥—É—Ä", category: "grains", calories: 342, protein: 12, fats: 1.3, carbs: 76, price: "medium", allergens: ["gluten"]},
            {id: 37, name: "–ü–µ—Ä–ª–æ–≤–∫–∞", category: "grains", calories: 352, protein: 9.3, fats: 1.1, carbs: 73, price: "low", allergens: ["gluten"]},
            {id: 38, name: "–ö—É—Å–∫—É—Å", category: "grains", calories: 376, protein: 13, fats: 0.6, carbs: 77, price: "medium", allergens: ["gluten"]},
            {id: 39, name: "–ü—à–µ–Ω–æ", category: "grains", calories: 348, protein: 11, fats: 3.3, carbs: 69, price: "low", allergens: []},
            {id: 40, name: "–ú–∞–∫–∞—Ä–æ–Ω—ã –∏–∑ —Ç–≤—ë—Ä–¥—ã—Ö —Å–æ—Ä—Ç–æ–≤", category: "grains", calories: 371, protein: 13, fats: 1.5, carbs: 75, price: "medium", allergens: ["gluten"]},
            {id: 41, name: "–•–ª–µ–± —Ü–µ–ª—å–Ω–æ–∑–µ—Ä–Ω–æ–≤–æ–π", category: "grains", calories: 247, protein: 9, fats: 3.4, carbs: 49, price: "medium", allergens: ["gluten"]},
            {id: 42, name: "–•–ª–µ–± —Ä–∂–∞–Ω–æ–π", category: "grains", calories: 259, protein: 8.5, fats: 3.3, carbs: 48, price: "low", allergens: ["gluten"]},
            {id: 43, name: "–ö—É–∫—É—Ä—É–∑–Ω–∞—è –∫—Ä—É–ø–∞", category: "grains", calories: 337, protein: 8.3, fats: 1.2, carbs: 75, price: "low", allergens: []},
            {id: 44, name: "–ß–µ—á–µ–≤–∏—Ü–∞", category: "grains", calories: 352, protein: 24, fats: 1.5, carbs: 63, price: "medium", allergens: []},
            {id: 45, name: "–ù—É—Ç", category: "grains", calories: 364, protein: 19, fats: 6, carbs: 61, price: "medium", allergens: []},

            // Protein (20 items)
            {id: 46, name: "–ö—É—Ä–∏–Ω–∞—è –≥—Ä—É–¥–∫–∞", category: "protein", calories: 165, protein: 31, fats: 3.6, carbs: 0, price: "medium", allergens: []},
            {id: 47, name: "–ò–Ω–¥–µ–π–∫–∞", category: "protein", calories: 189, protein: 29, fats: 7, carbs: 0, price: "high", allergens: []},
            {id: 48, name: "–ì–æ–≤—è–¥–∏–Ω–∞ –ø–æ—Å—Ç–Ω–∞—è", category: "protein", calories: 250, protein: 26, fats: 15, carbs: 0, price: "high", allergens: []},
            {id: 49, name: "–°–≤–∏–Ω–∏–Ω–∞ –Ω–µ–∂–∏—Ä–Ω–∞—è", category: "protein", calories: 242, protein: 27, fats: 14, carbs: 0, price: "medium", allergens: []},
            {id: 50, name: "–õ–æ—Å–æ—Å—å", category: "protein", calories: 208, protein: 20, fats: 13, carbs: 0, price: "high", allergens: ["fish"]},
            {id: 51, name: "–¢—É–Ω–µ—Ü", category: "protein", calories: 144, protein: 30, fats: 1, carbs: 0, price: "high", allergens: ["fish"]},
            {id: 52, name: "–¢—Ä–µ—Å–∫–∞", category: "protein", calories: 82, protein: 18, fats: 0.7, carbs: 0, price: "medium", allergens: ["fish"]},
            {id: 53, name: "–ö—Ä–µ–≤–µ—Ç–∫–∏", category: "protein", calories: 99, protein: 24, fats: 0.3, carbs: 0.2, price: "high", allergens: ["fish"]},
            {id: 54, name: "–Ø–π—Ü–∞ –∫—É—Ä–∏–Ω—ã–µ", category: "protein", calories: 157, protein: 13, fats: 11, carbs: 0.7, price: "low", allergens: ["eggs"]},
            {id: 55, name: "–¢–≤–æ—Ä–æ–≥ –æ–±–µ–∑–∂–∏—Ä–µ–Ω–Ω—ã–π", category: "protein", calories: 72, protein: 16, fats: 0.6, carbs: 1.3, price: "low", allergens: ["lactose"]},
            {id: 56, name: "–¢–≤–æ—Ä–æ–≥ 5%", category: "protein", calories: 121, protein: 17, fats: 5, carbs: 1.8, price: "low", allergens: ["lactose"]},
            {id: 57, name: "–ì—Ä–µ—á–µ—Å–∫–∏–π –π–æ–≥—É—Ä—Ç", category: "protein", calories: 59, protein: 10, fats: 0.4, carbs: 3.6, price: "medium", allergens: ["lactose"]},
            {id: 58, name: "–¢–æ—Ñ—É", category: "protein", calories: 76, protein: 8, fats: 4.8, carbs: 1.9, price: "medium", allergens: ["soy"]},
            {id: 59, name: "–¢–µ–º–ø–µ", category: "protein", calories: 193, protein: 19, fats: 11, carbs: 9, price: "high", allergens: ["soy"]},
            {id: 60, name: "–§–∞—Å–æ–ª—å –∫—Ä–∞—Å–Ω–∞—è", category: "protein", calories: 337, protein: 22, fats: 1.5, carbs: 61, price: "low", allergens: []},
            {id: 61, name: "–§–∞—Å–æ–ª—å –±–µ–ª–∞—è", category: "protein", calories: 333, protein: 23, fats: 1.6, carbs: 60, price: "low", allergens: []},
            {id: 62, name: "–ì–æ—Ä–æ—Ö", category: "protein", calories: 298, protein: 20, fats: 2, carbs: 53, price: "low", allergens: []},
            {id: 63, name: "–ü—Ä–æ—Ç–µ–∏–Ω–æ–≤—ã–π –±–∞—Ç–æ–Ω—á–∏–∫", category: "protein", calories: 200, protein: 20, fats: 7, carbs: 15, price: "high", allergens: ["nuts", "soy"]},
            {id: 64, name: "–ü—Ä–æ—Ç–µ–∏–Ω–æ–≤—ã–π –∫–æ–∫—Ç–µ–π–ª—å", category: "protein", calories: 120, protein: 24, fats: 1.5, carbs: 3, price: "high", allergens: ["lactose"]},
            {id: 65, name: "–ê—Ä–∞—Ö–∏—Å–æ–≤–∞—è –ø–∞—Å—Ç–∞", category: "protein", calories: 588, protein: 25, fats: 50, carbs: 20, price: "medium", allergens: ["nuts"]},

            // Dairy (10 items)
            {id: 66, name: "–ú–æ–ª–æ–∫–æ 1.5%", category: "dairy", calories: 44, protein: 2.8, fats: 1.5, carbs: 4.7, price: "low", allergens: ["lactose"]},
            {id: 67, name: "–ú–æ–ª–æ–∫–æ 3.2%", category: "dairy", calories: 60, protein: 2.9, fats: 3.2, carbs: 4.7, price: "low", allergens: ["lactose"]},
            {id: 68, name: "–ö–µ—Ñ–∏—Ä 1%", category: "dairy", calories: 40, protein: 3, fats: 1, carbs: 4, price: "low", allergens: ["lactose"]},
            {id: 69, name: "–ô–æ–≥—É—Ä—Ç –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ã–π 2.5%", category: "dairy", calories: 60, protein: 5, fats: 2.5, carbs: 3.5, price: "medium", allergens: ["lactose"]},
            {id: 70, name: "–°—ã—Ä –º–æ—Ü–∞—Ä–µ–ª–ª–∞", category: "dairy", calories: 280, protein: 28, fats: 17, carbs: 3.1, price: "high", allergens: ["lactose"]},
            {id: 71, name: "–°—ã—Ä —á–µ–¥–¥–µ—Ä", category: "dairy", calories: 402, protein: 25, fats: 33, carbs: 1.3, price: "high", allergens: ["lactose"]},
            {id: 72, name: "–°—ã—Ä —Ñ–µ—Ç–∞", category: "dairy", calories: 264, protein: 14, fats: 21, carbs: 4.1, price: "high", allergens: ["lactose"]},
            {id: 73, name: "–°–º–µ—Ç–∞–Ω–∞ 15%", category: "dairy", calories: 158, protein: 2.6, fats: 15, carbs: 3.6, price: "low", allergens: ["lactose"]},
            {id: 74, name: "–°–ª–∏–≤–∫–∏ 10%", category: "dairy", calories: 118, protein: 3, fats: 10, carbs: 4, price: "medium", allergens: ["lactose"]},
            {id: 75, name: "–ú–∏–Ω–¥–∞–ª—å–Ω–æ–µ –º–æ–ª–æ–∫–æ", category: "dairy", calories: 24, protein: 1, fats: 1.1, carbs: 3.4, price: "high", allergens: ["nuts"]},

            // Recipes (25 items)
            {id: 76, name: "–û–≤—Å—è–Ω–∫–∞ —Å —è–≥–æ–¥–∞–º–∏", category: "recipes", calories: 320, protein: 12, fats: 8, carbs: 55, price: "medium", allergens: ["gluten"]},
            {id: 77, name: "–û–º–ª–µ—Ç —Å –æ–≤–æ—â–∞–º–∏", category: "recipes", calories: 250, protein: 18, fats: 16, carbs: 8, price: "low", allergens: ["eggs"]},
            {id: 78, name: "–ì—Ä–µ—á–µ—Å–∫–∏–π —Å–∞–ª–∞—Ç", category: "recipes", calories: 180, protein: 8, fats: 14, carbs: 10, price: "medium", allergens: ["lactose"]},
            {id: 79, name: "–ö—É—Ä–∏–Ω–∞—è –≥—Ä—É–¥–∫–∞ —Å –±—Ä–æ–∫–∫–æ–ª–∏", category: "recipes", calories: 280, protein: 38, fats: 8, carbs: 15, price: "medium", allergens: []},
            {id: 80, name: "–õ–æ—Å–æ—Å—å —Å –æ–≤–æ—â–∞–º–∏ –Ω–∞ –ø–∞—Ä—É", category: "recipes", calories: 350, protein: 32, fats: 18, carbs: 20, price: "high", allergens: ["fish"]},
            {id: 81, name: "–°–∞–ª–∞—Ç —Å —Ç—É–Ω—Ü–æ–º", category: "recipes", calories: 220, protein: 28, fats: 6, carbs: 15, price: "high", allergens: ["fish"]},
            {id: 82, name: "–†–∏—Å —Å –æ–≤–æ—â–∞–º–∏", category: "recipes", calories: 290, protein: 8, fats: 4, carbs: 58, price: "low", allergens: []},
            {id: 83, name: "–ì—Ä–µ—á–∫–∞ —Å –≥—Ä–∏–±–∞–º–∏", category: "recipes", calories: 270, protein: 12, fats: 6, carbs: 48, price: "low", allergens: []},
            {id: 84, name: "–ö–∏–Ω–æ–∞ —Å –∞–≤–æ–∫–∞–¥–æ", category: "recipes", calories: 380, protein: 14, fats: 16, carbs: 52, price: "high", allergens: []},
            {id: 85, name: "–¢–≤–æ—Ä–æ–∂–Ω–∞—è –∑–∞–ø–µ–∫–∞–Ω–∫–∞", category: "recipes", calories: 210, protein: 20, fats: 8, carbs: 18, price: "low", allergens: ["lactose", "eggs"]},
            {id: 86, name: "–ü—Ä–æ—Ç–µ–∏–Ω–æ–≤—ã–π —Å–º—É–∑–∏", category: "recipes", calories: 280, protein: 25, fats: 8, carbs: 30, price: "high", allergens: ["lactose"]},
            {id: 87, name: "–¢–æ—Ñ—É —Å –æ–≤–æ—â–∞–º–∏", category: "recipes", calories: 240, protein: 18, fats: 12, carbs: 20, price: "medium", allergens: ["soy"]},
            {id: 88, name: "–ß–µ—á–µ–≤–∏—á–Ω—ã–π —Å—É–ø", category: "recipes", calories: 230, protein: 16, fats: 3, carbs: 40, price: "low", allergens: []},
            {id: 89, name: "–ö—É—Ä–∏–Ω—ã–π —Å—É–ø", category: "recipes", calories: 180, protein: 20, fats: 4, carbs: 18, price: "medium", allergens: []},
            {id: 90, name: "–°–∞–ª–∞—Ç –¶–µ–∑–∞—Ä—å", category: "recipes", calories: 320, protein: 24, fats: 18, carbs: 20, price: "medium", allergens: ["lactose", "eggs", "gluten"]},
            {id: 91, name: "–ü–∞—Å—Ç–∞ —Å —Ç–æ–º–∞—Ç–∞–º–∏", category: "recipes", calories: 340, protein: 12, fats: 8, carbs: 58, price: "medium", allergens: ["gluten"]},
            {id: 92, name: "–°—Ç–µ–π–∫ –∏–∑ –≥–æ–≤—è–¥–∏–Ω—ã —Å —Å–∞–ª–∞—Ç–æ–º", category: "recipes", calories: 420, protein: 38, fats: 24, carbs: 12, price: "high", allergens: []},
            {id: 93, name: "–ó–∞–ø–µ—á—ë–Ω–Ω–∞—è —Ä—ã–±–∞ —Å –æ–≤–æ—â–∞–º–∏", category: "recipes", calories: 290, protein: 32, fats: 10, carbs: 20, price: "high", allergens: ["fish"]},
            {id: 94, name: "–û–≤–æ—â–Ω–æ–µ —Ä–∞–≥—É", category: "recipes", calories: 160, protein: 5, fats: 4, carbs: 28, price: "low", allergens: []},
            {id: 95, name: "–§—Ä—É–∫—Ç–æ–≤—ã–π —Å–∞–ª–∞—Ç", category: "recipes", calories: 120, protein: 2, fats: 1, carbs: 28, price: "medium", allergens: []},
            {id: 96, name: "–°–º—É–∑–∏ –±–æ—É–ª", category: "recipes", calories: 280, protein: 8, fats: 6, carbs: 52, price: "high", allergens: []},
            {id: 97, name: "–°—ã—Ä–Ω–∏–∫–∏", category: "recipes", calories: 250, protein: 18, fats: 12, carbs: 20, price: "low", allergens: ["lactose", "eggs", "gluten"]},
            {id: 98, name: "–Ø–∏—á–Ω–∏—Ü–∞ —Å –±–µ–∫–æ–Ω–æ–º", category: "recipes", calories: 340, protein: 22, fats: 26, carbs: 4, price: "medium", allergens: ["eggs"]},
            {id: 99, name: "–†—ã–±–Ω—ã–µ –∫–æ—Ç–ª–µ—Ç—ã —Å –≥–∞—Ä–Ω–∏—Ä–æ–º", category: "recipes", calories: 310, protein: 28, fats: 12, carbs: 26, price: "medium", allergens: ["fish", "eggs"]},
            {id: 100, name: "–ë—É—Ä—Ä–∏—Ç–æ —Å –∫—É—Ä–∏—Ü–µ–π", category: "recipes", calories: 450, protein: 32, fats: 16, carbs: 48, price: "medium", allergens: ["gluten", "lactose"]}
        ];

        // Load profile from localStorage
        function loadProfile() {
            const profile = JSON.parse(localStorage.getItem('nutritionProfile') || '{}');
            if (Object.keys(profile).length > 0) {
                // Restore form values
                if (profile.age) {
                    document.querySelector(`input[name="age"][value="${profile.age}"]`).checked = true;
                }
                if (profile.gender) {
                    document.querySelector(`input[name="gender"][value="${profile.gender}"]`).checked = true;
                }
                if (profile.weight) document.getElementById('weight').value = profile.weight;
                if (profile.height) document.getElementById('height').value = profile.height;
                if (profile.exactAge) document.getElementById('exact-age').value = profile.exactAge;
                if (profile.activity) document.getElementById('activity').value = profile.activity;
                if (profile.goal) document.getElementById('goal').value = profile.goal;
                if (profile.budget) document.getElementById('budget').value = profile.budget;
                
                // Restore allergies
                if (profile.allergies) {
                    profile.allergies.forEach(allergy => {
                        const checkbox = document.getElementById(`allergy-${allergy}`);
                        if (checkbox) checkbox.checked = true;
                    });
                }
            }
        }

        // Save profile to localStorage
        function saveProfile() {
            const profile = {
                age: document.querySelector('input[name="age"]:checked')?.value || '18-30',
                gender: document.querySelector('input[name="gender"]:checked')?.value || 'male',
                weight: parseFloat(document.getElementById('weight').value) || 70,
                height: parseFloat(document.getElementById('height').value) || 170,
                exactAge: parseInt(document.getElementById('exact-age').value) || 25,
                activity: parseFloat(document.getElementById('activity').value) || 1.55,
                goal: document.getElementById('goal').value || 'maintain',
                budget: document.getElementById('budget').value || 'medium',
                allergies: []
            };

            // Collect allergies
            ['gluten', 'lactose', 'nuts', 'fish', 'eggs', 'soy'].forEach(allergy => {
                if (document.getElementById(`allergy-${allergy}`)?.checked) {
                    profile.allergies.push(allergy);
                }
            });

            localStorage.setItem('nutritionProfile', JSON.stringify(profile));
        }

        // Calculate calories using Mifflin-St Jeor formula
        function calculateCalories() {
            const profile = JSON.parse(localStorage.getItem('nutritionProfile') || '{}');
            
            const weight = profile.weight || 70;
            const height = profile.height || 170;
            const age = profile.exactAge || 25;
            const gender = profile.gender || 'male';
            const activity = profile.activity || 1.55;
            const goal = profile.goal || 'maintain';

            // BMR calculation
            let bmr;
            if (gender === 'male') {
                bmr = 10 * weight + 6.25 * height - 5 * age + 5;
            } else {
                bmr = 10 * weight + 6.25 * height - 5 * age - 161;
            }

            // TDEE (Total Daily Energy Expenditure)
            const tdee = bmr * activity;

            // Adjust based on goal
            let targetCalories = tdee;
            if (goal === 'loss') {
                targetCalories = tdee * 0.8; // -20%
            } else if (goal === 'gain') {
                targetCalories = tdee * 1.15; // +15%
            }

            // Macros distribution
            let proteinPercent, fatsPercent, carbsPercent;
            if (goal === 'loss') {
                proteinPercent = 0.30;
                fatsPercent = 0.20;
                carbsPercent = 0.50;
            } else if (goal === 'gain') {
                proteinPercent = 0.25;
                fatsPercent = 0.25;
                carbsPercent = 0.50;
            } else {
                proteinPercent = 0.25;
                fatsPercent = 0.30;
                carbsPercent = 0.45;
            }

            const protein = (targetCalories * proteinPercent) / 4; // 4 cal per gram
            const fats = (targetCalories * fatsPercent) / 9; // 9 cal per gram
            const carbs = (targetCalories * carbsPercent) / 4; // 4 cal per gram

            // Display results
            document.getElementById('bmr').textContent = Math.round(bmr);
            document.getElementById('tdee').textContent = Math.round(tdee);
            document.getElementById('target-calories').textContent = Math.round(targetCalories);
            document.getElementById('protein').textContent = Math.round(protein);
            document.getElementById('fats').textContent = Math.round(fats);
            document.getElementById('carbs').textContent = Math.round(carbs);

            document.getElementById('results-section').style.display = 'block';

            // Save calculated values
            localStorage.setItem('targetCalories', targetCalories);
            localStorage.setItem('targetProtein', protein);
            localStorage.setItem('targetFats', fats);
            localStorage.setItem('targetCarbs', carbs);

            // Scroll to results
            document.getElementById('results-section').scrollIntoView({ behavior: 'smooth' });
        }

        // Generate weekly menu
        function generateMenu() {
            const profile = JSON.parse(localStorage.getItem('nutritionProfile') || '{}');
            const targetCalories = parseFloat(localStorage.getItem('targetCalories')) || 2000;
            const allergies = profile.allergies || [];
            const budget = profile.budget || 'medium';

            // Filter products based on allergies and budget
            let availableProducts = productsDatabase.filter(product => {
                // Check allergies
                const hasAllergen = product.allergens.some(allergen => allergies.includes(allergen));
                if (hasAllergen) return false;

                // Check budget
                if (budget === 'low' && product.price === 'high') return false;
                if (budget === 'medium' && product.price === 'high') return false; // Allow medium and low

                return true;
            });

            // Separate recipes into categories for different meals
            const allRecipes = availableProducts.filter(p => p.category === 'recipes');
            
            // Breakfast recipes (–ª–µ–≥–∫–∏–µ –±–ª—é–¥–∞)
            const breakfastRecipes = allRecipes.filter(r => 
                r.name.includes('–û–≤—Å—è–Ω–∫–∞') || r.name.includes('–û–º–ª–µ—Ç') || r.name.includes('–°—ã—Ä–Ω–∏–∫–∏') || 
                r.name.includes('–Ø–∏—á–Ω–∏—Ü–∞') || r.name.includes('—Å–º—É–∑–∏') || r.name.includes('–¢–≤–æ—Ä–æ–∂–Ω–∞—è') ||
                r.calories < 350
            );
            
            // Lunch recipes (–æ—Å–Ω–æ–≤–Ω—ã–µ —Å—ã—Ç–Ω—ã–µ –±–ª—é–¥–∞)
            const lunchRecipes = allRecipes.filter(r => 
                r.name.includes('–ö—É—Ä–∏–Ω–∞—è') || r.name.includes('–õ–æ—Å–æ—Å—å') || r.name.includes('–†–∏—Å') || 
                r.name.includes('–°—Ç–µ–π–∫') || r.name.includes('–ü–∞—Å—Ç–∞') || r.name.includes('—Å—É–ø') ||
                r.name.includes('–ë—É—Ä—Ä–∏—Ç–æ') || (r.calories >= 300 && r.calories <= 500)
            );
            
            // Dinner recipes (–ª–µ–≥—á–µ –æ–±–µ–¥–∞, –Ω–æ –ø–∏—Ç–∞—Ç–µ–ª—å–Ω—ã–µ)
            const dinnerRecipes = allRecipes.filter(r => 
                r.name.includes('–°–∞–ª–∞—Ç') || r.name.includes('–¢–æ—Ñ—É') || r.name.includes('—Ä—ã–±–∞') || 
                r.name.includes('–æ–≤–æ—â') || r.name.includes('–ì—Ä–µ—á–∫–∞') || r.name.includes('–ö–∏–Ω–æ–∞') ||
                (r.calories >= 200 && r.calories <= 400)
            );
            
            // Snack recipes (–ø–µ—Ä–µ–∫—É—Å—ã)
            const snackRecipes = allRecipes.filter(r => 
                r.name.includes('–§—Ä—É–∫—Ç–æ–≤—ã–π') || r.name.includes('–ü—Ä–æ—Ç–µ–∏–Ω–æ–≤—ã–π') || r.calories < 300
            );

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ä–µ—Ü–µ–ø—Ç–æ–≤
            if (breakfastRecipes.length < 3) {
                breakfastRecipes.push(...allRecipes.filter(r => r.calories < 400).slice(0, 5));
            }
            if (lunchRecipes.length < 3) {
                lunchRecipes.push(...allRecipes.filter(r => r.calories >= 300).slice(0, 5));
            }
            if (dinnerRecipes.length < 3) {
                dinnerRecipes.push(...allRecipes.filter(r => r.calories >= 200 && r.calories <= 400).slice(0, 5));
            }
            if (snackRecipes.length < 3) {
                snackRecipes.push(...allRecipes.slice(0, 5));
            }

            if (allRecipes.length < 10) {
                alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ä–µ—Ü–µ–ø—Ç–æ–≤ —Å –≤–∞—à–∏–º–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã.');
                return;
            }

            const days = ['–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫', '–í—Ç–æ—Ä–Ω–∏–∫', '–°—Ä–µ–¥–∞', '–ß–µ—Ç–≤–µ—Ä–≥', '–ü—è—Ç–Ω–∏—Ü–∞', '–°—É–±–±–æ—Ç–∞', '–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ'];
            const weekMenu = [];

            // –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ—Ü–µ–ø—Ç—ã –¥–ª—è —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏—è
            const usedBreakfast = new Set();
            const usedLunch = new Set();
            const usedDinner = new Set();
            const usedSnack = new Set();

            for (let day of days) {
                const dayMenu = { day: day, meals: [] };
                let dailyCalories = 0;

                // –ó–∞–≤—Ç—Ä–∞–∫
                let breakfastRecipe = getRandomUnusedRecipe(breakfastRecipes, usedBreakfast);
                dayMenu.meals.push({
                    type: '–ó–∞–≤—Ç—Ä–∞–∫',
                    recipe: breakfastRecipe
                });
                dailyCalories += breakfastRecipe.calories;

                // –û–±–µ–¥
                let lunchRecipe = getRandomUnusedRecipe(lunchRecipes, usedLunch);
                dayMenu.meals.push({
                    type: '–û–±–µ–¥',
                    recipe: lunchRecipe
                });
                dailyCalories += lunchRecipe.calories;

                // –£–∂–∏–Ω
                let dinnerRecipe = getRandomUnusedRecipe(dinnerRecipes, usedDinner);
                dayMenu.meals.push({
                    type: '–£–∂–∏–Ω',
                    recipe: dinnerRecipe
                });
                dailyCalories += dinnerRecipe.calories;

                // –ü–µ—Ä–µ–∫—É—Å
                let snackRecipe = getRandomUnusedRecipe(snackRecipes, usedSnack);
                dayMenu.meals.push({
                    type: '–ü–µ—Ä–µ–∫—É—Å',
                    recipe: snackRecipe
                });
                dailyCalories += snackRecipe.calories;

                dayMenu.totalCalories = Math.round(dailyCalories);
                weekMenu.push(dayMenu);

                // –°–±—Ä–æ—Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã—Ö —Ä–µ—Ü–µ–ø—Ç–æ–≤ –ø–æ—Å–ª–µ 7 –¥–Ω–µ–π –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
                if (usedBreakfast.size >= breakfastRecipes.length - 1) usedBreakfast.clear();
                if (usedLunch.size >= lunchRecipes.length - 1) usedLunch.clear();
                if (usedDinner.size >= dinnerRecipes.length - 1) usedDinner.clear();
                if (usedSnack.size >= snackRecipes.length - 1) usedSnack.clear();
            }

            // Save menu
            localStorage.setItem('weekMenu', JSON.stringify(weekMenu));

            // Display menu
            displayMenu();

            // Switch to menu tab
            showTab('menu');
        }

        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ –Ω–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω–æ–≥–æ —Ä–µ—Ü–µ–ø—Ç–∞
        function getRandomUnusedRecipe(recipes, usedSet) {
            let availableRecipes = recipes.filter(r => !usedSet.has(r.id));
            
            // –ï—Å–ª–∏ –≤—Å–µ —Ä–µ—Ü–µ–ø—Ç—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã, –Ω–∞—á–∏–Ω–∞–µ–º –∑–∞–Ω–æ–≤–æ
            if (availableRecipes.length === 0) {
                usedSet.clear();
                availableRecipes = recipes;
            }
            
            const selectedRecipe = availableRecipes[Math.floor(Math.random() * availableRecipes.length)];
            usedSet.add(selectedRecipe.id);
            return selectedRecipe;
        }

        // Display menu
        function displayMenu() {
            const weekMenu = JSON.parse(localStorage.getItem('weekMenu') || '[]');
            if (weekMenu.length === 0) {
                return;
            }

            let html = '<div class="menu-grid">';
            weekMenu.forEach((day, dayIndex) => {
                html += `
                    <div class="day-card">
                        <div class="day-title">${day.day}</div>
                        <div style="text-align: center; margin: 10px 0; color: #764ba2; font-weight: bold;">
                            –í—Å–µ–≥–æ: ${day.totalCalories} –∫–∫–∞–ª
                        </div>
                `;

                day.meals.forEach((meal, mealIndex) => {
                    html += `
                        <div class="meal-item">
                            <div class="meal-name">${meal.type}: ${meal.recipe.name}</div>
                            <div class="meal-calories">
                                ${meal.recipe.calories} –∫–∫–∞–ª | 
                                –ë: ${meal.recipe.protein}–≥ | 
                                –ñ: ${meal.recipe.fats}–≥ | 
                                –£: ${meal.recipe.carbs}–≥
                            </div>
                            <div class="meal-actions">
                                <button class="btn-secondary" onclick="replaceMeal(${dayIndex}, ${mealIndex})">
                                    üîÑ –ó–∞–º–µ–Ω–∏—Ç—å
                                </button>
                                <button class="btn-secondary" onclick="removeMeal(${dayIndex}, ${mealIndex})">
                                    ‚ùå –£–¥–∞–ª–∏—Ç—å
                                </button>
                            </div>
                        </div>
                    `;
                });

                html += `
                        <button class="btn-secondary" style="width: 100%; margin-top: 15px;" onclick="addMeal(${dayIndex})">
                            ‚ûï –î–æ–±–∞–≤–∏—Ç—å –±–ª—é–¥–æ
                        </button>
                    </div>
                `;
            });
            html += '</div>';

            html += `
                <div style="text-align: center; margin-top: 30px;">
                    <button class="btn-primary" onclick="exportMenu()">üì• –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –º–µ–Ω—é</button>
                    <button class="btn-primary" onclick="generateMenu()">üîÑ –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤–æ–µ –º–µ–Ω—é</button>
                </div>
            `;

            document.getElementById('menu-display').innerHTML = html;
        }

        // Replace meal
        function replaceMeal(dayIndex, mealIndex) {
            const weekMenu = JSON.parse(localStorage.getItem('weekMenu') || '[]');
            const profile = JSON.parse(localStorage.getItem('nutritionProfile') || '{}');
            const allergies = profile.allergies || [];
            const budget = profile.budget || 'medium';

            // Filter recipes
            let availableRecipes = productsDatabase.filter(product => {
                if (product.category !== 'recipes') return false;
                const hasAllergen = product.allergens.some(allergen => allergies.includes(allergen));
                if (hasAllergen) return false;
                if (budget === 'low' && product.price === 'high') return false;
                return true;
            });

            // Select random recipe
            const newRecipe = availableRecipes[Math.floor(Math.random() * availableRecipes.length)];
            weekMenu[dayIndex].meals[mealIndex].recipe = newRecipe;

            // Recalculate daily calories
            weekMenu[dayIndex].totalCalories = weekMenu[dayIndex].meals.reduce((sum, meal) => sum + meal.recipe.calories, 0);

            localStorage.setItem('weekMenu', JSON.stringify(weekMenu));
            displayMenu();
        }

        // Remove meal
        function removeMeal(dayIndex, mealIndex) {
            const weekMenu = JSON.parse(localStorage.getItem('weekMenu') || '[]');
            weekMenu[dayIndex].meals.splice(mealIndex, 1);
            weekMenu[dayIndex].totalCalories = weekMenu[dayIndex].meals.reduce((sum, meal) => sum + meal.recipe.calories, 0);
            localStorage.setItem('weekMenu', JSON.stringify(weekMenu));
            displayMenu();
        }

        // Add meal
        function addMeal(dayIndex) {
            const weekMenu = JSON.parse(localStorage.getItem('weekMenu') || '[]');
            const profile = JSON.parse(localStorage.getItem('nutritionProfile') || '{}');
            const allergies = profile.allergies || [];
            const budget = profile.budget || 'medium';

            let availableRecipes = productsDatabase.filter(product => {
                if (product.category !== 'recipes') return false;
                const hasAllergen = product.allergens.some(allergen => allergies.includes(allergen));
                if (hasAllergen) return false;
                if (budget === 'low' && product.price === 'high') return false;
                return true;
            });

            const newRecipe = availableRecipes[Math.floor(Math.random() * availableRecipes.length)];
            weekMenu[dayIndex].meals.push({
                type: '–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–∏—ë–º',
                recipe: newRecipe
            });

            weekMenu[dayIndex].totalCalories = weekMenu[dayIndex].meals.reduce((sum, meal) => sum + meal.recipe.calories, 0);
            localStorage.setItem('weekMenu', JSON.stringify(weekMenu));
            displayMenu();
        }

        // Export menu
        function exportMenu() {
            const weekMenu = JSON.parse(localStorage.getItem('weekMenu') || '[]');
            let text = '–ù–ï–î–ï–õ–¨–ù–û–ï –ú–ï–ù–Æ\n\n';

            weekMenu.forEach(day => {
                text += `${day.day.toUpperCase()} (${day.totalCalories} –∫–∫–∞–ª)\n`;
                text += '‚îÄ'.repeat(50) + '\n';
                day.meals.forEach(meal => {
                    text += `${meal.type}: ${meal.recipe.name}\n`;
                    text += `  ${meal.recipe.calories} –∫–∫–∞–ª | –ë: ${meal.recipe.protein}–≥ | –ñ: ${meal.recipe.fats}–≥ | –£: ${meal.recipe.carbs}–≥\n\n`;
                });
                text += '\n';
            });

            // Download as text file
            const blob = new Blob([text], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'weekly-menu.txt';
            a.click();
        }

        // Show/hide tabs
        function showTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });

            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');

            if (tabName === 'products') {
                displayProducts();
            } else if (tabName === 'menu') {
                displayMenu();
            }
        }

        // Display products
        function displayProducts() {
            const category = document.getElementById('category-filter').value;
            const search = document.getElementById('search-products').value.toLowerCase();

            let filtered = productsDatabase;
            if (category !== 'all') {
                filtered = filtered.filter(p => p.category === category);
            }
            if (search) {
                filtered = filtered.filter(p => p.name.toLowerCase().includes(search));
            }

            let html = '';
            filtered.forEach(product => {
                html += `
                    <div class="product-card">
                        <div class="product-name">${product.name}</div>
                        <div class="product-calories">${product.calories} –∫–∫–∞–ª</div>
                        <div style="font-size: 0.85em; color: #666; margin-top: 5px;">
                            –ë: ${product.protein}–≥ | –ñ: ${product.fats}–≥ | –£: ${product.carbs}–≥
                        </div>
                        <div style="margin-top: 8px; font-size: 0.8em; color: #764ba2;">
                            ${product.price === 'low' ? 'üí∞' : product.price === 'medium' ? 'üí∞üí∞' : 'üí∞üí∞üí∞'}
                        </div>
                    </div>
                `;
            });

            document.getElementById('products-grid').innerHTML = html || '<p style="text-align: center; color: #999;">–ü—Ä–æ–¥—É–∫—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</p>';
        }

        // Filter products
        function filterProducts() {
            displayProducts();
        }

        // Initialize on load
        window.onload = function() {
            loadProfile();
            displayProducts();
            
            // –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ª—é–±–æ–≥–æ –ø–æ–ª—è
            document.addEventListener('change', function(e) {
                if (e.target.matches('#weight, #height, #exact-age, #activity, #goal, #budget, input[name="age"], input[name="gender"], input[type="checkbox"][id^="allergy-"]')) {
                    saveProfile();
                }
            });
        };
    </script>
</body>
</html>
